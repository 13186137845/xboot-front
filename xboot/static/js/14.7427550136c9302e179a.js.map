{"version":3,"sources":["webpack:///src/views/own-space/own-space.vue","webpack:///./src/views/own-space/own-space.vue?0e84","webpack:///./src/views/own-space/own-space.vue"],"names":["own_space","name","data","accessToken","userForm","id","avatar","username","mobile","email","status","statusTxt","type","typeTxt","address","addressArray","mobileEditForm","code","emailEditForm","defaultList","url","uploadList","viewImage","imgUrl","codeError","initPhone","initEmail","uid","saveLoading","identifyError","savePassLoading","oldPassError","identifyCodeRight","hasGetIdentifyCode","canGetIdentifyCode","checkIdentifyCodeLoading","mobileEditValidate","required","message","validator","rule","value","callback","test","Error","emailEditValidate","editMobileVisible","gettingIdentifyCodeBtnContent","editEmailVisible","sendVerifyEmailLoading","canSendEditEmail","methods","init","this","Object","storage","userInfo","JSON","parse","js_cookie_default","a","get","handleView","handleRemove","file","fileList","$refs","upload","splice","indexOf","handleSuccess","res","success","result","handleFormatError","$Notice","warning","title","desc","handleMaxSize","handleBeforeUpload","check","length","showChangeMobile","showChangeEmail","getIdentifyCode","_this","validate","valid","timeLast","timer","setInterval","clearInterval","cancelEditUserInfo","$store","commit","localStorage","pageOpenedList","stringify_default","state","app","lastPageName","$router","push","saveEdit","_this2","params","nickName","description","postRequest","then","$Message","set","changeAddress","cancelInputCodeBox","cancelEditEmail","submitCode","_this3","hasChangePhone","_this4","hasChangeEmail","sendVerifyEmail","_this5","setTimeout","mounted","own_space_own_space","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","ref","model","label-width","label-position","label","_l","item","src","nativeOn","click","$event","percent","percentage","hide-info","_e","staticStyle","display","width","show-upload-list","default-file-list","on-success","format","max-size","on-format-error","on-exceeded-size","before-upload","action","headers","height","line-height","size","_s","margin-left","font-size","on","data-type","level","on-change","$$v","$set","expression","createTime","loading","closable","mask-closable","rules","prop","placeholder","error","position","disabled","margin","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/14.7427550136c9302e179a.js","sourcesContent":["<style lang=\"less\">\n@import \"./own-space.less\";\n</style>\n\n<template>\n    <div class=\"own-space\">\n        <Card>\n            <p slot=\"title\">\n                <Icon type=\"person\"></Icon>\n                个人信息\n            </p>\n            <div>\n                <Form \n                    ref=\"userForm\"\n                    :model=\"userForm\" \n                    :label-width=\"100\" \n                    label-position=\"right\"\n                >\n                    <FormItem label=\"用户头像：\">\n                        <div class=\"upload-list\" v-for=\"item in uploadList\">\n                          <template v-if=\"item.status === 'finished'\">\n                              <img :src=\"item.url\">\n                              <div class=\"upload-list-cover\">\n                                  <Icon type=\"ios-eye-outline\" @click.native=\"handleView(item.url)\"></Icon>\n                                  <Icon type=\"ios-trash-outline\" @click.native=\"handleRemove(item)\"></Icon>\n                              </div>\n                          </template>\n                          <template v-else>\n                              <Progress v-if=\"item.showProgress\" :percent=\"item.percentage\" hide-info></Progress>\n                          </template>\n                        </div>\n                        <Upload\n                            ref=\"upload\"\n                            :show-upload-list=\"false\"\n                            :default-file-list=\"defaultList\"\n                            :on-success=\"handleSuccess\"\n                            :format=\"['jpg','jpeg','png']\"\n                            :max-size=\"5120\"\n                            :on-format-error=\"handleFormatError\"\n                            :on-exceeded-size=\"handleMaxSize\"\n                            :before-upload=\"handleBeforeUpload\"\n                            type=\"drag\"\n                            action=\"/upload/file\"\n                            :headers=\"accessToken\"\n                            style=\"display: inline-block;width:58px;\">\n                          <div style=\"width: 58px;height:58px;line-height: 58px;\">\n                              <Icon type=\"camera\" size=\"20\"></Icon>\n                          </div>\n                      </Upload>\n                    </FormItem>\n                    <FormItem label=\"用户姓名：\">\n                        <span>{{userForm.username}}</span>\n                    </FormItem>\n                    <FormItem label=\"手机号：\">\n                        <span>{{userForm.mobile}}</span>\n                        <div style=\"display:inline-block;margin-left:20px;font-size:13px;\">\n                            <a @click=\"showChangeMobile\">修改手机号</a>\n                        </div>\n                    </FormItem>\n                    <FormItem label=\"邮箱：\">\n                        <span>{{userForm.email}}</span>\n                        <div style=\"display:inline-block;margin-left:20px;font-size:13px;\">\n                            <a @click=\"showChangeEmail\">修改邮箱</a>\n                        </div>\n                    </FormItem>\n                    <FormItem label=\"地址：\" >\n                        <al-cascader v-model=\"userForm.addressArray\" @on-change=\"changeAddress\" data-type=\"code\" level=\"2\" style=\"width:250px\"/>\n                    </FormItem>\n                   <FormItem label=\"用户类型：\">\n                        <span>{{ userForm.typeTxt }}</span>\n                    </FormItem>\n                    <FormItem label=\"用户状态：\">\n                        <span>{{ userForm.statusTxt }}</span>\n                    </FormItem>\n                    <FormItem label=\"创建时间：\">\n                        <span>{{ userForm.createTime }}</span>\n                    </FormItem>\n                    <FormItem>\n                        <Button type=\"primary\" style=\"width: 100px;\" :loading=\"saveLoading\" @click=\"saveEdit\">保存</Button>\n                        <Button type=\"ghost\" @click=\"cancelEditUserInfo\">取消</Button>\n                    </FormItem>\n                </Form>\n            </div>\n        </Card>\n        <Modal title=\"修改手机号\" v-model=\"editMobileVisible\" :closable='false' :mask-closable=false :width=\"500\">\n            <Form ref=\"mobileEditForm\" :model=\"mobileEditForm\" :label-width=\"60\" :rules=\"mobileEditValidate\">\n                <FormItem label=\"手机号\" prop=\"mobile\">\n                    <Input v-model=\"mobileEditForm.mobile\" @on-change=\"hasChangePhone\" placeholder=\"请输入新手机号\"></Input>\n                </FormItem>\n                <FormItem label=\"验证码\" prop=\"code\" :error=\"codeError\">\n                    <Input v-model=\"mobileEditForm.code\" placeholder=\"请输入您收到的短信验证码\" style=\"width:200px;\"></Input>\n                    <div style=\"display:inline-block;position:relative;\">\n                        <Button @click=\"getIdentifyCode\" :disabled=\"canGetIdentifyCode\">{{ gettingIdentifyCodeBtnContent }}</Button>\n                    </div>\n                </FormItem>\n            </Form>\n            <div slot=\"footer\">\n                <Button type=\"text\" @click=\"cancelInputCodeBox\">取消</Button>\n                <Button type=\"primary\" :loading=\"checkIdentifyCodeLoading\" @click=\"submitCode\">提交</Button>\n            </div>\n        </Modal>\n        <Modal title=\"修改邮箱\" v-model=\"editEmailVisible\" :closable='false' :mask-closable=false :width=\"500\">\n            <Form ref=\"emailEditForm\" :model=\"emailEditForm\" :label-width=\"90\" :rules=\"emailEditValidate\">\n                <FormItem label=\"新邮箱地址\" prop=\"email\">\n                    <Input v-model=\"emailEditForm.email\" @on-change=\"hasChangeEmail\" placeholder=\"请输入新邮箱地址\"></Input>\n                </FormItem>\n            </Form>\n            <div slot=\"footer\">\n                <Button type=\"text\" @click=\"cancelEditEmail\">取消</Button>\n                <Button type=\"primary\" :disabled=\"canSendEditEmail\" :loading=\"sendVerifyEmailLoading\" @click=\"sendVerifyEmail\">发送验证邮件</Button>\n            </div>\n        </Modal>\n        <Modal title=\"图片预览\" v-model=\"viewImage\">\n            <img :src=\"imgUrl\" v-if=\"viewImage\" style=\"width: 80%;margin: 0 auto;display: block;\">\n        </Modal>\n    </div>\n</template>\n\n<script>\nimport Cookies from \"js-cookie\";\nimport { getStore } from \"../../utils/storage\";\nexport default {\n  name: \"ownspace_index\",\n  data() {\n    const validePhone = (rule, value, callback) => {\n      var re = /^1[0-9]{10}$/;\n      if (!re.test(value)) {\n        callback(new Error(\"请输入正确格式的手机号\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      accessToken: {},\n      userForm: {\n        id: \"\",\n        avatar: \"\",\n        username: \"\",\n        mobile: \"\",\n        email: \"\",\n        status: \"\",\n        statusTxt: \"\",\n        type: \"\",\n        typeTxt: \"\",\n        address: \"\",\n        addressArray: []\n      },\n      mobileEditForm: {\n        mobile: \"\",\n        code: \"\"\n      },\n      emailEditForm: {\n        email: \"\"\n      },\n      defaultList: [\n        {\n          url: \"\"\n        }\n      ],\n      uploadList: [],\n      viewImage: false,\n      imgUrl: \"\",\n      codeError: \"\",\n      initPhone: \"\",\n      initEmail: \"\",\n      uid: \"\", // 登录用户的userId\n      saveLoading: false,\n      identifyError: \"\", // 验证码错误\n      savePassLoading: false,\n      oldPassError: \"\",\n      identifyCodeRight: false, // 验证码是否正确\n      hasGetIdentifyCode: false, // 是否点了获取验证码\n      canGetIdentifyCode: false, // 是否可点获取验证码\n      checkIdentifyCodeLoading: false,\n      mobileEditValidate: {\n        mobile: [\n          { required: true, message: \"请输入手机号码\" },\n          { validator: validePhone }\n        ]\n      },\n      emailEditValidate: {\n        email: [\n          { required: true, message: \"请输入邮箱地址\" },\n          { type: \"email\", message: \"邮箱格式不正确\" }\n        ]\n      },\n      editMobileVisible: false, // 显示填写验证码box\n      gettingIdentifyCodeBtnContent: \"获取验证码\", // “获取验证码”按钮的文字\n      editEmailVisible: false,\n      sendVerifyEmailLoading: false,\n      canSendEditEmail: true\n    };\n  },\n  methods: {\n    init() {\n      this.accessToken = {\n        accessToken: getStore(\"accessToken\")\n      };\n      let userInfo = JSON.parse(Cookies.get(\"userInfo\"));\n      userInfo.addressArray = [];\n      this.userForm = userInfo;\n      this.initPhone = userInfo.mobile;\n      this.mobileEditForm.mobile = userInfo.mobile;\n      this.initEmail = userInfo.email;\n      this.emailEditForm.email = userInfo.email;\n      this.defaultList[0].url = userInfo.avatar;\n      if (userInfo.address !== null && userInfo.address !== \"\") {\n        this.userForm.address = userInfo.address;\n        this.userForm.addressArray = JSON.parse(userInfo.address);\n      }\n      if (this.userForm.type === 0) {\n        this.userForm.typeTxt = \"普通用户\";\n      } else if (this.userForm.type === 1) {\n        this.userForm.typeTxt = \"管理员\";\n      }\n\n      if (this.userForm.status === 0) {\n        this.userForm.statusTxt = \"正常状态\";\n      } else if (this.userForm.status === -1) {\n        this.userForm.statusTxt = \"禁用\";\n      }\n    },\n    handleView(imgUrl) {\n      this.imgUrl = imgUrl;\n      this.viewImage = true;\n    },\n    handleRemove(file) {\n      const fileList = this.$refs.upload.fileList;\n      this.$refs.upload.fileList.splice(fileList.indexOf(file), 1);\n    },\n    handleSuccess(res, file) {\n      if (res.success === true) {\n        file.url = res.result;\n        this.userForm.avatar = res.result;\n        this.defaultList[0].url = res.result;\n        this.$refs.upload.fileList.splice(0, 1);\n      }\n    },\n    handleFormatError(file) {\n      this.$Notice.warning({\n        title: \"不支持的文件格式\",\n        desc:\n          \"所选文件‘ \" + file.name + \" ’格式不正确, 请选择 .jpg 或 .png格式文件\"\n      });\n    },\n    handleMaxSize(file) {\n      this.$Notice.warning({\n        title: \"文件大小过大\",\n        desc: \"所选文件‘ \" + file.name + \" ’大小过大, 不得超过 5M.\"\n      });\n    },\n    handleBeforeUpload() {\n      const check = this.uploadList.length < 2;\n      if (!check) {\n        this.$Notice.warning({\n          title: \"最多只能上传 1 张图片\"\n        });\n      }\n      return check;\n    },\n    showChangeMobile() {\n      this.editMobileVisible = true;\n    },\n    showChangeEmail() {\n      this.editEmailVisible = true;\n    },\n    getIdentifyCode() {\n      this.hasGetIdentifyCode = true;\n      this.$refs[\"mobileEditForm\"].validate(valid => {\n        if (valid) {\n          this.canGetIdentifyCode = true;\n          let timeLast = 60;\n          let timer = setInterval(() => {\n            if (timeLast >= 0) {\n              this.gettingIdentifyCodeBtnContent = timeLast + \"秒后重试\";\n              timeLast -= 1;\n            } else {\n              clearInterval(timer);\n              this.gettingIdentifyCodeBtnContent = \"获取验证码\";\n              this.canGetIdentifyCode = false;\n            }\n          }, 1000);\n          this.editMobileVisible = true;\n          // you can write ajax request here\n        }\n      });\n    },\n    cancelEditUserInfo() {\n      this.$store.commit(\"removeTag\", \"ownspace_index\");\n      localStorage.pageOpenedList = JSON.stringify(\n        this.$store.state.app.pageOpenedList\n      );\n      let lastPageName = \"\";\n      if (this.$store.state.app.pageOpenedList.length > 1) {\n        lastPageName = this.$store.state.app.pageOpenedList[1].name;\n      } else {\n        lastPageName = this.$store.state.app.pageOpenedList[0].name;\n      }\n      this.$router.push({\n        name: lastPageName\n      });\n    },\n    saveEdit() {\n      this.saveLoading = true;\n      let params = this.userForm;\n      delete params.nickName;\n      delete params.description;\n      this.postRequest(\"/user/editOwn\", params).then(res => {\n        this.saveLoading = false;\n        if (res.success === true) {\n          this.$Message.success(\"保存成功\");\n          // 更新用户信息\n          Cookies.set(\"userInfo\", this.userForm);\n          // 更新头像\n          this.$store.commit(\"setAvatarPath\", this.userForm.avatar);\n        }\n      });\n    },\n    changeAddress() {\n      this.userForm.address = JSON.stringify(this.userForm.addressArray);\n    },\n    cancelInputCodeBox() {\n      this.editMobileVisible = false;\n      this.userForm.mobile = this.initPhone;\n    },\n    cancelEditEmail() {\n      this.editEmailVisible = false;\n      this.emailEditForm.email = this.initEmail;\n    },\n    submitCode() {\n      this.checkIdentifyCodeLoading = true;\n      this.$refs[\"mobileEditForm\"].validate(valid => {\n        if (valid) {\n          if (this.mobileEditForm.code.length === 0) {\n            this.codeError = \"请填写短信验证码\";\n            this.checkIdentifyCodeLoading = false;\n            return;\n          } else {\n            this.$Message.success(\"修改成功\");\n            this.editMobileVisible = false;\n            this.checkIdentifyCodeLoading = false;\n          }\n        }\n      });\n    },\n    hasChangePhone() {\n      if (this.mobileEditForm.mobile === this.initPhone) {\n        this.canGetIdentifyCode = true;\n      } else {\n        this.$refs[\"mobileEditForm\"].validate(valid => {\n          if (valid) {\n            this.canGetIdentifyCode = false;\n          } else {\n            this.canGetIdentifyCode = true;\n          }\n        });\n      }\n    },\n    hasChangeEmail() {\n      if (this.emailEditForm.email === this.initEmail) {\n        this.canSendEditEmail = true;\n      } else {\n        this.canSendEditEmail = false;\n      }\n    },\n    sendVerifyEmail() {\n      this.$refs[\"emailEditForm\"].validate(valid => {\n        if (valid) {\n          this.sendVerifyEmailLoading = true;\n          setTimeout(() => {\n            this.sendVerifyEmailLoading = false;\n            this.editEmailVisible = false;\n            this.$Message.success(\"发送验证邮件成功，请注意查收\");\n          }, 1000);\n        }\n      });\n    }\n  },\n  mounted() {\n    this.uploadList = this.$refs.upload.fileList;\n    this.init();\n    this.hasChangePhone();\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/own-space/own-space.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"own-space\"},[_c('Card',[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('Icon',{attrs:{\"type\":\"person\"}}),_vm._v(\"\\n            个人信息\\n        \")],1),_vm._v(\" \"),_c('div',[_c('Form',{ref:\"userForm\",attrs:{\"model\":_vm.userForm,\"label-width\":100,\"label-position\":\"right\"}},[_c('FormItem',{attrs:{\"label\":\"用户头像：\"}},[_vm._l((_vm.uploadList),function(item){return _c('div',{staticClass:\"upload-list\"},[(item.status === 'finished')?[_c('img',{attrs:{\"src\":item.url}}),_vm._v(\" \"),_c('div',{staticClass:\"upload-list-cover\"},[_c('Icon',{attrs:{\"type\":\"ios-eye-outline\"},nativeOn:{\"click\":function($event){_vm.handleView(item.url)}}}),_vm._v(\" \"),_c('Icon',{attrs:{\"type\":\"ios-trash-outline\"},nativeOn:{\"click\":function($event){_vm.handleRemove(item)}}})],1)]:[(item.showProgress)?_c('Progress',{attrs:{\"percent\":item.percentage,\"hide-info\":\"\"}}):_vm._e()]],2)}),_vm._v(\" \"),_c('Upload',{ref:\"upload\",staticStyle:{\"display\":\"inline-block\",\"width\":\"58px\"},attrs:{\"show-upload-list\":false,\"default-file-list\":_vm.defaultList,\"on-success\":_vm.handleSuccess,\"format\":['jpg','jpeg','png'],\"max-size\":5120,\"on-format-error\":_vm.handleFormatError,\"on-exceeded-size\":_vm.handleMaxSize,\"before-upload\":_vm.handleBeforeUpload,\"type\":\"drag\",\"action\":\"/upload/file\",\"headers\":_vm.accessToken}},[_c('div',{staticStyle:{\"width\":\"58px\",\"height\":\"58px\",\"line-height\":\"58px\"}},[_c('Icon',{attrs:{\"type\":\"camera\",\"size\":\"20\"}})],1)])],2),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"用户姓名：\"}},[_c('span',[_vm._v(_vm._s(_vm.userForm.username))])]),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"手机号：\"}},[_c('span',[_vm._v(_vm._s(_vm.userForm.mobile))]),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"inline-block\",\"margin-left\":\"20px\",\"font-size\":\"13px\"}},[_c('a',{on:{\"click\":_vm.showChangeMobile}},[_vm._v(\"修改手机号\")])])]),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"邮箱：\"}},[_c('span',[_vm._v(_vm._s(_vm.userForm.email))]),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"inline-block\",\"margin-left\":\"20px\",\"font-size\":\"13px\"}},[_c('a',{on:{\"click\":_vm.showChangeEmail}},[_vm._v(\"修改邮箱\")])])]),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"地址：\"}},[_c('al-cascader',{staticStyle:{\"width\":\"250px\"},attrs:{\"data-type\":\"code\",\"level\":\"2\"},on:{\"on-change\":_vm.changeAddress},model:{value:(_vm.userForm.addressArray),callback:function ($$v) {_vm.$set(_vm.userForm, \"addressArray\", $$v)},expression:\"userForm.addressArray\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"用户类型：\"}},[_c('span',[_vm._v(_vm._s(_vm.userForm.typeTxt))])]),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"用户状态：\"}},[_c('span',[_vm._v(_vm._s(_vm.userForm.statusTxt))])]),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"创建时间：\"}},[_c('span',[_vm._v(_vm._s(_vm.userForm.createTime))])]),_vm._v(\" \"),_c('FormItem',[_c('Button',{staticStyle:{\"width\":\"100px\"},attrs:{\"type\":\"primary\",\"loading\":_vm.saveLoading},on:{\"click\":_vm.saveEdit}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"ghost\"},on:{\"click\":_vm.cancelEditUserInfo}},[_vm._v(\"取消\")])],1)],1)],1)]),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"修改手机号\",\"closable\":false,\"mask-closable\":false,\"width\":500},model:{value:(_vm.editMobileVisible),callback:function ($$v) {_vm.editMobileVisible=$$v},expression:\"editMobileVisible\"}},[_c('Form',{ref:\"mobileEditForm\",attrs:{\"model\":_vm.mobileEditForm,\"label-width\":60,\"rules\":_vm.mobileEditValidate}},[_c('FormItem',{attrs:{\"label\":\"手机号\",\"prop\":\"mobile\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入新手机号\"},on:{\"on-change\":_vm.hasChangePhone},model:{value:(_vm.mobileEditForm.mobile),callback:function ($$v) {_vm.$set(_vm.mobileEditForm, \"mobile\", $$v)},expression:\"mobileEditForm.mobile\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"验证码\",\"prop\":\"code\",\"error\":_vm.codeError}},[_c('Input',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"请输入您收到的短信验证码\"},model:{value:(_vm.mobileEditForm.code),callback:function ($$v) {_vm.$set(_vm.mobileEditForm, \"code\", $$v)},expression:\"mobileEditForm.code\"}}),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"inline-block\",\"position\":\"relative\"}},[_c('Button',{attrs:{\"disabled\":_vm.canGetIdentifyCode},on:{\"click\":_vm.getIdentifyCode}},[_vm._v(_vm._s(_vm.gettingIdentifyCodeBtnContent))])],1)],1)],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.cancelInputCodeBox}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.checkIdentifyCodeLoading},on:{\"click\":_vm.submitCode}},[_vm._v(\"提交\")])],1)],1),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"修改邮箱\",\"closable\":false,\"mask-closable\":false,\"width\":500},model:{value:(_vm.editEmailVisible),callback:function ($$v) {_vm.editEmailVisible=$$v},expression:\"editEmailVisible\"}},[_c('Form',{ref:\"emailEditForm\",attrs:{\"model\":_vm.emailEditForm,\"label-width\":90,\"rules\":_vm.emailEditValidate}},[_c('FormItem',{attrs:{\"label\":\"新邮箱地址\",\"prop\":\"email\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入新邮箱地址\"},on:{\"on-change\":_vm.hasChangeEmail},model:{value:(_vm.emailEditForm.email),callback:function ($$v) {_vm.$set(_vm.emailEditForm, \"email\", $$v)},expression:\"emailEditForm.email\"}})],1)],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.cancelEditEmail}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.canSendEditEmail,\"loading\":_vm.sendVerifyEmailLoading},on:{\"click\":_vm.sendVerifyEmail}},[_vm._v(\"发送验证邮件\")])],1)],1),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"图片预览\"},model:{value:(_vm.viewImage),callback:function ($$v) {_vm.viewImage=$$v},expression:\"viewImage\"}},[(_vm.viewImage)?_c('img',{staticStyle:{\"width\":\"80%\",\"margin\":\"0 auto\",\"display\":\"block\"},attrs:{\"src\":_vm.imgUrl}}):_vm._e()])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-2bf59538\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/views/own-space/own-space.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2bf59538\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./own-space.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./own-space.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./own-space.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2bf59538\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./own-space.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/own-space/own-space.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}